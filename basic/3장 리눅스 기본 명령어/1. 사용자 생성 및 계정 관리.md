## 3.1.0 기본 명령어

1. which:

   1. 명령어의 경로를 찾아주거나 alias를 보여주는 명령어로 \$PATH가 설정되어 있는 경로에서만 해당 명령어의 경로를 찾는다.
   2. 현재 위치에서 명령을 실행 시켰을 때 어떤 명령이 실행되는지를 알고 확인할 수 있다.
      > which 명령어

2. alias : 별칭 지정, 자주 사용하는 명령어를 특정 문자로 입력해두고 명령어 대신 해당 명령어로 실행

   > alias [별명(=단축명령어) = '명령어']

3. unalias: alias 기능 해제

   > unalias [옵션][별칭(=단축명령어)]

   \-a : 설정된 모든 alias해제

4. man: 명령어들의 자세한 사용법이나 매뉴얼을 볼 때 사용하는 명령어
5. whatis : 명령어에 대한 간략한 기능을 출력하는 명령어
6. whereis: 특정 명령어의 매뉴얼 페이지 위치를 찾는 명령어
7. apropos: whatis DB를 검색해 관련 명령어와 그 명령어에 대한 간단한 설명을 표시하는 명령어

- \$PATH
  1.  실행 파일들의 디렉터리 위치를 저장해 놓은 환경 변수
  2.  명령어 입력자의 현재 작업 디렉터리와 상관없이 특정 명령어를 입력하면 PATH변수에 저장되어 있는 경로에서 해당 명령어를 찾아 실행한다.
  3.  기존의 PATH에 새로운 경로를 추가하는 방법에는 \$PATH나 홈디렉터리의 .bash_profile에 PATH를 추가한다.
      > export 변수명 = \$변수명:변수값
  4.  PATH에 설정된 내용 확인을 위한 명령어: echo \$PATH

## 3.1.1 사용자 생성

1. useradd(= adduser) : 계정을 생성하는 명령어

   > useradd [옵션] 계정명

   \-s : 사용자의 로그인 기본 쉘 지정  
   \-d : 계정의 홈 디렉토리 지정  
   \-f : 패스워드가 만기된 후 계정이 영구히 말소될 때까지의 기간 지정  
   \-e : 사용자 계정의 유효기간을 설정, 일정 시간 동안 사용 가능한 임시 계정을 만들고자 할 때 사용  
   \-c : /etc/passwrd에 새로운 사용자 설명 추가  
   \-G: 계정이 속한 그룹 외에 다른 그룹에 계정 추가

2. passwd : 생성된 계정자의 패스워드를 입력 및 변경하는 명령어 (/etc/shadow에 기록됨)

   > passwd [옵션] 계정명

   \-S (Status): 계정 상태 표시( PS:정상, NP: 패스워드가 없음, LK: Lock 상태이거나 NP상태)  
   \-d (delete): 계정 패스워드 삭제  
   \-l (lock): 계정을 Lock 상태로 변경  
   \-u (unlock): 계정의 Lock상태를 해제

3. su :
   1. switch user의 줄임말
   2. 현재의 사용자 계정에서 로그아웃 하지 않고 다른 사용자 계정으로 로그인하여 해당 사용자의 권한을 획득하는 명령어  
      \-, -l, --login: 지정한 사용자의 환경변수를 적용하여 로그인 (실제 로그인한 것처럼 사용자의 환경까지 적용됨)  
      \-s: 지정된 쉘로 로그인  
      \-c: 쉘을 실행하지 않고 주어진 명령어 수행

## 3.1.2 사용자 관련 파일

1.  /etc/default/useradd: useradd명령어로 사용자 계정을 추가할 때 사용되는 정보를 읽어오는 파일  
    \-GROUP : 기본적으로 소속될 그룹을 GID를 지정  
    \-HOME : 홈 디렉터리 위치를 지정  
    \- INACTIVE : 패스워드 사용 기간이 만료된 후 계정이 사용 불가능해지는 날을 지정 (0 이면 바로 사용 불가능, -1이면 기능을 사용하지 않음)  
    \- EXPIRE : 패스워드 만료일을 지정  
    \- SHELL : 기본셸 지정  
    \- SKEL : 홈 디렉터리로 복사될 초기 환경설정 파일들이 저장된 디렉터리를 지정  
    \- CREATE_MAIL_SPOOL : 메일 파일 저장 여부를 지정

    - useradd -D 후에 변경가능  
      \-g : 그룹 변경  
      \-b : 홈 디렉터리 변경  
      \-f : INACTIVE 변경  
      \-e : 계정 종료일 변경  
      \-s : 셸 변경

2.  /etc/passwd: 계정자의 정보를 가지고 있는 파일로 리눅스에 로그인할 때 사용된다. 여러개의 필드를 :로 구분

    > username : password : uid : gid : comment : homedirectory : shell

    \-password: pwconv가 활성화되어 있는 경우는 x로 표시되고, 실제 패스워드는 /etc/shadow에 나타남  
    \-comment: 보안상 요즘 사용하지 않지만, 계정의 설명

3.  /etc/shadow: 계정자의 패스워드 정보가 암호화되어 있는 파일, 암호화 패스워드 및 계정의 유효기간 등 기록

    > username : password : lastchange : mindays : maxdays : warndays : inactive : expire : flag

    \-mindays : 비밀번호 변경 후 재변경을 위한 대기일 수 (비밀번호 최소 사용 일수)  
    \-maxdays : 비밀번호 유효기간  
    \-warndays: 비밀번호 만료 전 경고 알림일 지정  
    \-inactive: 비밀번호 변경 유예기간 (만료 뒤 실제 계정이 사용불가능하기까지의 시간)  
    \-expire: 비밀번호 만료와 상관없이 계정을 사용할 수 없게 되는 날

4.  /etc/login.defs: 사용자 계정 설정과 관련된 기본값을 정의한 파일, 새로운 계정 생성시 반드시 참조하는 파일  
    \-MAIL_DIR: 메일 디렉터리 지정  
    \-PASS_MAX_DAYS: 패스워드 변경없이 사용할 수 있는 최대 일자  
    \-PASS_MIN_DAYS: 패스워드 설정 후 최소 사용 시간  
    \-PASS_MIN_LEN: 패스워드 최소 바이트수  
    \-PASS_WARN_AGE: 패스워드 만료전 경고 알림일 지정  
    \-UID_MIN: 생성할 수 있는 UID 시작번호  
    \-UID_MAX: 생성할 수 있는 최대 UID번호  
    \-GID_MIN: 새로 생성되는 그룹의 GID 시작번호  
    \-GID_MAX: 새로 생성되는 그룹에서 지정할 수 있는 최대 GID번호  
    \-CREATE_HOME: 홈디렉터리 생성할 것인가의 여부

## 3.1.3 사용자 계정관리

1. usermod: /home에 위치한 사용자들의 정보를 변경하는 명령어

   > usermod [옵션] 계정명

   \-u uid: 새로운 UID지정 (-o옵션과 같이 사용ㄹ하면 강제 설정 가능)  
   \-g : 새로운 GID지정  
   \-G: 새로운 보조그룹 지정 (기존의 그룹을 유지한채 그룹 추가)  
   \-d 홈디렉터리: 새로운 홈디렉터리 지정(-m옵션과 같이 사용하면 새로 생성 가능)  
   \-s 셸: 새로운 셸 지정  
   \-c 주석: 새로운 주석 지정  
   \-l ID: 로그인 ID를 바꾸는 옵션으로 새로운 계정명으로 변경

2. userdel : 기존 계정 정보를 삭제하는 명령어 (/etc/passwd, /etc/shadow, /etc/group에서 계정의 정보 삭제됨)

   > userdel [옵션] 계정명

   \-r : 계정명의 /var/spool/mail의 메일 파일과 홈디렉터리의 내용 모두 삭제

3. chage: 패스워드의 만료정보를 변경하는 명령어

   > chage [옵션] 계정명

   \-l (list): 사용자 계정 정보 출력  
   \-m (mindays): 설정 암호 최소 사용일  
   \-M (Maxdays): 설정 암호 사용 가능일자  
   \-E (Expire): 암호 만기일 지정 (-E 2020/12/31)  
   \-W (Warndays): 만기 전 변경 요구 경고 날짜 지정  
   \-I (Inactive): 만기 이후 사용가능한 일수

## 3.1.4 그룹 관리

1.  groupadd: 새로운 그룹을 생성하는 명령어

    > groupadd [옵션] 그룹명

    \-g gid: 그룹에 gid 지정  
    \-r : 시스템 그룹 생성시 사용, 500번 이하 값 지정

2.  groupdel : 그룹을 삭제하는 명령어, 그룹 안에 소속되어 있는 계정명이 있을 경우 해당 그룹은 삭제 되지 않음

    > groupdel 그룹명

3.  groupmod: 그룹의 설정을 변경하는 명령어

    > groupmod [옵션] 그룹명

    \-g gid: gid 변경  
    \-n 그룹명: 그룹명을 새롭게 변경할 때 사용

## 3.1.5 그룹 관련 파일

1. /etc/group: 사용자 그룹에 대해 정의되어 있는 파일

   > groupname : password : gid : members

   \-members: 그룹 멤버리스트로 콤마로 구분한다.

2. /etc/gshadow: 그룹의 암호를 MD5로 하여 저장하며, 그룹의 소유자, 구성원 설정이 가능

   > groupname : grouppw : owner : members

   \-grouppw : !는 그룹 암호가 부여되지 않았음을 나타냄

## 3.1.6 사용자 조회 명령어

1. users : 시스템에 로그인한 사용자 정보를 출력하는 명령어

   > users [옵션]

   \--version : users 명령어 버전 정보 출력

2. who :

   1. 현재 시스템에 접속해 있는 사용자들을 조회하는 명령어로 root와 일반사용자 모두 사용이 가능하다.
   2. 사용자 계정명, 터미널정보, 접속시간, 접속한 서버 등 확인 가능

   > who [옵션]

   \-b : 마지막 시스템 부팅 시간 출력  
   \-q : 로그인한 사용자와 사용자 수를 모두 출력  
   \-r : 현재 시스템의 run level을 확인 가능

3. w :

   1. 현재 접속중인 사용자들의 정보를 나타내는 명령어
   2. 서버의 현재 시간정보, 서버 부팅 후 시스템 작동시간, 서버 접속자의 총수, 접속자별 서버 평균 부하율, 접속자별 서버 접속 계정명, TTY명, 로그인 시간정보 등 확인 가능
   3. JCPU는 TTY필드의 장치명에서 사용되는 모든 프로세스의 CPU 사용시간이고, PCPU는 WHAT필드에 나타나는 프로세스명에서 사용하는 CPU총 사용 시간이다.

4. id : 사용자 계정의 uid, gid, group을 확인하는 명령어

   > id [옵션] [계정명]

   \-g : GID만 표시  
   \-G: 사용자가 포함되어 있는 모든 그룹 정보 표시  
   \-u : UID만 표시

5. groups: 사용자 계정이 속한 그룹 목록을 확인하는 명령어
   > groups [계정명]
